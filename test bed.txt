
sudo hping3 --udp -p 1234 -d 1 -c 2000000 -q 192.168.100.60

sudo nping --udp -c 10000000 -q --rate 1000000 -p 1234 --data-length 1 192.168.100.60


tcpdump -i enp0s3 -n udp and port 12345

tcpdump -i enp0s3 -n -q -v udp and port 1234 > /dev/null | wc -l


sudo tshark -i enp0s3 -c 1000000 -f "udp dst port 1234" -a duration:50 -q -T fields -e udp.length -e frame.time_relative |
awk 'BEGIN {
    total_len = 0
    count = 0
    start_time = -1
    end_time = 0
}
{
    len = $1
    time = $2 + 0  # force numeric
    if (start_time < 0) start_time = time
    total_len += len
    count += 1
    end_time = time
}
END {
    duration = end_time - start_time
    if (count > 0 && duration > 0) {
        throughput = (total_len * 8) / duration
        printf("Packet count: %d\n", count)
        printf("Start time: %.6f s\n", start_time)
        printf("End time:   %.6f s\n", end_time)
        printf("Duration:   %.6f s\n", duration)
        printf("Average throughput: %.2f bps\n", throughput)
		printf("total_len: %.2f b\n", total_len)
    } else if (count > 0) {
        printf("Only one packet received, unable to calculate duration.\n")
    } else {
        printf("No packets received.\n")
    }
}'

